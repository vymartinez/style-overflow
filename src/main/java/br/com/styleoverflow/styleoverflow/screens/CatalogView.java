package br.com.styleoverflow.styleoverflow.screens;

import br.com.styleoverflow.styleoverflow.classes.Product;
import br.com.styleoverflow.styleoverflow.enums.Gender;
import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.control.*;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.layout.*;
import javafx.stage.Stage;

import java.util.ArrayList;
import java.util.List;
import java.util.stream.Collectors;

public class CatalogView {
    private final List<Product> allProducts = new ArrayList<>();
    private final VBox catalogBox = new VBox(10);
    private final ComboBox<Gender> genderFilter = new ComboBox<>();
    private final TextField searchField = new TextField();
    private final Button clearFiltersButton = new Button("Limpar Filtros");
    private final List<Product> cartProducts = new ArrayList<>();

    public CatalogView(Stage stage) {
        // Produtos de exemplo
        allProducts.add(new Product("Camiseta Dev", 59.90, 10,Gender.MALE, "data:image/jpeg;base64,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"));
        allProducts.add(new Product("Cropped Java", 69.90, 8, Gender.FEMALE, "data:image/jpeg;base64,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"));
        allProducts.add(new Product("Moletom C++", 120.00, 5, Gender.MALE, "data:image/jpeg;base64,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"));
        allProducts.add(new Product("Blusa Python", 90.00, 12, Gender.FEMALE, "data:image/jpeg;base64,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"));
        clearFiltersButton.setOnAction(e -> limparFiltros(stage));
        clearFiltersButton.setVisible(false);
    }

    public VBox getView(Stage stage) {
        VBox root = new VBox(15);
        root.setPadding(new Insets(20));

        // Filtro de pesquisa
        genderFilter.getItems().addAll(Gender.values());
        genderFilter.setPromptText("Filtrar por gênero");
        genderFilter.setOnAction(e -> updateCatalog(stage));

        // Campo de pesquisa
        searchField.setPromptText("Pesquisar produto...");
        searchField.textProperty().addListener((obs, oldVal, newVal) -> updateCatalog(stage));

        // Botão ver carrinho
        Button btnCart = new Button("Ver Carrinho");
        btnCart.setOnAction(e -> new CartView().showCart(stage));

        Button btnProfile = new Button("Perfil");
        btnProfile.setOnAction(e -> stage.getScene().setRoot(UserProfile.showProfile(stage)));

        btnCart.getStyleClass().add("btn-primary");
        btnProfile.getStyleClass().add("btn-primary");

        HBox topBar = new HBox(10, genderFilter, searchField, clearFiltersButton, btnCart, new Separator(), btnProfile);
        topBar.setAlignment(Pos.CENTER_LEFT);


        catalogBox.setPadding(new Insets(10));
        updateCatalog(stage);
        ScrollPane scrollPane = new ScrollPane(catalogBox);
        scrollPane.setFitToWidth(true);
        scrollPane.setVbarPolicy(ScrollPane.ScrollBarPolicy.AS_NEEDED);
        scrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);
        scrollPane.setStyle("-fx-background-color: transparent;");

// Define a altura máxima como 30% da altura do stage
        scrollPane.prefHeightProperty().bind(stage.heightProperty().multiply(0.5));

        root.getChildren().addAll(topBar, new Separator(), scrollPane);
        return root;
    }

    private void updateCatalog(Stage stage) {
        catalogBox.getChildren().clear();

        boolean filtroAtivo = genderFilter.getValue() != null || !searchField.getText().isEmpty();
        clearFiltersButton.setVisible(filtroAtivo);

        List<Product> filtered = allProducts.stream()
                .filter(p -> {
                    if (genderFilter.getValue() != null && p.getGender() != genderFilter.getValue()) return false;
                    return p.getName().toLowerCase().contains(searchField.getText().toLowerCase());
                })
                .collect(Collectors.toList());

        for (Product product : filtered) {
            catalogBox.getChildren().add(createProductCard(product, stage));
        }
    }

    private HBox createProductCard(Product product, Stage stage) {
        HBox box = new HBox(15);
        box.setPadding(new Insets(10));
        box.getStyleClass().add("product-card");

        ImageView image = new ImageView(new Image(product.getImagePath()));
        image.setFitWidth(100);
        image.setFitHeight(100);

        VBox info = new VBox(5);
        Label nome = new Label(product.getName());
        Label preco = new Label("R$ " + String.format("%.2f", product.getPrice()));
        Label estoque = new Label("Estoque: " + product.getStock());
        Button btnAddCart = new Button("Adicionar ao Carrinho");
        Button seeDetails = new Button("Ver detalhes");

        btnAddCart.getStyleClass().add("btn-primary");
        seeDetails.getStyleClass().add("btn-primary");

        btnAddCart.setOnAction(e -> cartProducts.add(product));
        seeDetails.setOnAction(e -> stage.getScene().setRoot(ProductDetail.showProduct(stage, product.getName(), product.getPrice(), product.getImagePath())));
        HBox buttonBox = new HBox(10, btnAddCart, seeDetails);
        info.getChildren().addAll(nome, preco, estoque, buttonBox);

        box.getChildren().addAll(image, info);
        return box;
    }

    private void limparFiltros(Stage stage) {
        genderFilter.getSelectionModel().clearSelection(); // limpa seleção
        genderFilter.setButtonCell(new ListCell<>() {
            @Override
            protected void updateItem(Gender item, boolean empty) {
                super.updateItem(item, empty);
                setText(empty || item == null ? "Filtrar por gênero" : item.toString());
            }
        });
        searchField.clear();
        updateCatalog(stage);
    }
}
